<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>hypercathexis dev notes part 1 | lvh</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="https://www.lvh.io/posts/hypercathexis-dev-notes-part-1.html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="author" content="lvh">
<link rel="prev" href="what-the-heck-is-a-clojurelangifnlo.html" title="What the heck is a clojure.lang.IFn$LO?" type="text/html">
<link rel="next" href="on-multiplayer-turn-based-game-mechanics.html" title="On multiplayer turn-based game mechanics" type="text/html">
<meta property="og:site_name" content="lvh">
<meta property="og:title" content="hypercathexis dev notes part 1">
<meta property="og:url" content="https://www.lvh.io/posts/hypercathexis-dev-notes-part-1.html">
<meta property="og:description" content="hy·per·ca·thex·is, n, pl hy·per·ca·thex·es \-kə-ˈthek-səs, -ka-\:
excessive concentration of desire upon a particular object
I'm considering renaming the project to its plural, hypercathexes,
because ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-10-18T06:55:15-07:00">
<meta property="article:tag" content="game">
<meta property="article:tag" content="hex">
<meta property="article:tag" content="hypercathexis">
<meta property="article:tag" content="mathjax">
<meta property="article:tag" content="svg">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://www.lvh.io/">
                <img src="../pinchy.svg" alt="lvh" id="logo"><span id="blog-title">lvh</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../about.html">About</a>
                </li>
<li>
<a href="../archive.html">Archive</a>
                </li>
<li>
<a href="../categories/index.html">Tags</a>
                </li>
<li>
<a href="../talks.html">Talks</a>
                </li>
<li>
<a href="../rss.xml">RSS feed</a>

                
            </li>
</ul>
<!-- Custom search --><form method="get" id="search" action="//duckduckgo.com/" class="navbar-form pull-right">
<input type="hidden" name="sites" value="https://www.lvh.io/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="display: none;">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right">
<li>
    <a href="hypercathexis-dev-notes-part-1.rst" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">hypercathexis dev notes part 1</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    lvh
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2014-10-18T06:55:15-07:00" itemprop="datePublished" title="2014-10-18 06:55">2014-10-18 06:55</time></a></p>
            
        <p class="sourceline"><a href="hypercathexis-dev-notes-part-1.rst" id="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<blockquote class="epigraph">
hy·per·ca·thex·is, n, pl hy·per·ca·thex·es \-kə-ˈthek-səs, -ka-\:
excessive concentration of desire upon a particular object</blockquote>
<p>I'm considering renaming the project to its plural, hypercathexes,
because then it can be about a hyper cat in a bunch of hexes.</p>
<p>The only real constraints I started with was that I wanted a
simultaneous turn-based space game on a hex grid.</p>
<p>Amit Patel from <a class="reference external" href="http://www.redblobgames.com">Red Blob Games</a> has basically the awesomest page
about <a class="reference external" href="http://www.redblobgames.com/grids/hexagons/">hex grids</a>, and a ton of awesome pages about many other areas
of game development. I think it's a fantastic resource for programmers
like myself who don't do game dev as a day job, but just want to make
a little game on the side.</p>
<p>Simultaneous turn-based means that all players plan their moves
simultaneously, and they are then also executed simultaneously. This
has an interesting scaling effect. On the one hand, it clearly scales
better to many players, because players "play" simultaneously. On the
other hand, you start getting interesting problems. For example, clock
synchronization. Does the entire world advance with the same tick-tock
pattern? What happens when a player does <em>not</em> make a move within the
allotted time? If you allow different clocks in the world, does time
advance faster if both players submit a move, or do you always wait
until the maximum timeout?</p>
<p>I wanted an excuse to play with <a class="reference external" href="https://github.com/swannodette/om">Om</a> and found <a class="reference external" href="https://github.com/plexus/chestnut">Chestnut</a>.</p>
<p>The <a class="reference external" href="https://github.com/lvh/hypercathexis/tree/d454da2b1d8c1cf491fc3cd7dba83ee1b2bd4c76">first version</a> had a working hex grid, but displayed it using
offset coordinates. I wanted to work using axial coordinates as much
as possible, because it makes a lot of math so much easier. Axial
coordinates work together with the "grain" of the hex map:</p>
<object data="../img/AxialBaseVectors.svg" type="image/svg+xml">
axial base vectors</object>
<p>Second thing I did was move from individual <tt class="docutils literal">&lt;img&gt;</tt> tags produced by
Om to a single <tt class="docutils literal">&lt;svg&gt;</tt> with hexes (<tt class="docutils literal">&lt;polygon&gt;</tt>) inside it. This
fixed a number of annoying placement issues with CSS. CSS really wants
to position things based on bounding box, not midpoints. That's great
for web pages, not so much for my hex grid. I ran into a number of
annoying issues where certain hex borders would be wider than others.
Browsers aren't made to draw hex grids based on left/right offsets, I
guess...</p>
<p>I started by expressing distances in the SVG in terms of the hex
width, which would become my unit. The height would then be
\(\sqrt{3}/2\). Then, I realized that I could make my life easier by
expressing all x coordinates in terms of a single hex width, and all y
coordinates in terms of a single hex height; then I could just scale
differently across x and y at the end.</p>
<img alt="Simple SVG hex grid" src="../img/BasicSVGHexGrid.png"><p>Developing in Firefox was mostly painless, but I discovered many
discrepancies once trying it in Chrome. Things that should be the same
aren't, particularly when it comes to transforms. For example, Chrome
would occasionally literally do the inverse of the scaling it was
supposed to:</p>
<img alt="Differences in scaling behavior across browsers" src="../img/HexGridCrossBrowserScalingIssues.png"><p>I guess trying to implement things in browsers was a mistake.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../categories/game.html" rel="tag">game</a></li>
            <li><a class="tag p-category" href="../categories/hex.html" rel="tag">hex</a></li>
            <li><a class="tag p-category" href="../categories/hypercathexis.html" rel="tag">hypercathexis</a></li>
            <li><a class="tag p-category" href="../categories/mathjax.html" rel="tag">mathjax</a></li>
            <li><a class="tag p-category" href="../categories/svg.html" rel="tag">svg</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="what-the-heck-is-a-clojurelangifnlo.html" rel="prev" title="What the heck is a clojure.lang.IFn$LO?">Previous post</a>
            </li>
            <li class="next">
                <a href="on-multiplayer-turn-based-game-mechanics.html" rel="next" title="On multiplayer turn-based game mechanics">Next post</a>
            </li>
        </ul></nav></aside><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script><script type="text/x-mathjax-config">
            MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
            </script></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2016         <a href="mailto:_@lvh.io">lvh</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36779422-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
