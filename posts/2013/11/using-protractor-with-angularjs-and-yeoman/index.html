<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Using protractor with AngularJS and Yeoman | lvh</title>
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#383234">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../rss.xml">
<link rel="canonical" href="https://www.lvh.io/posts/2013/11/using-protractor-with-angularjs-and-yeoman/">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="lvh">
<link rel="prev" href="../../10/thoughts-on-rdrand-in-linux/" title="Thoughts on RDRAND in Linux" type="text/html">
<link rel="next" href="../../12/external-drive-lossage-on-mavericks/" title="External drive lossage on Mavericks" type="text/html">
<meta property="og:site_name" content="lvh">
<meta property="og:title" content="Using protractor with AngularJS and Yeoman">
<meta property="og:url" content="https://www.lvh.io/posts/2013/11/using-protractor-with-angularjs-and-yeoman/">
<meta property="og:description" content="In writing the website for Crypto 101, my upcoming book, I've been
toying around with AngularJS. The basic setup was done using Yeoman.
First of all, the Yeoman Angular generator gives you a
karma-e2e">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2013-11-15T11:29:00-08:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://www.lvh.io/">
            <img src="../../../../pinchy.svg" alt="lvh" id="logo" class="d-inline-block align-top"><span id="blog-title">lvh</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../../../about/" class="nav-link">About</a>
                </li>
<li class="nav-item">
<a href="../../../../archive/" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../../../tags/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../../../talks/" class="nav-link">Talks</a>
                </li>
<li class="nav-item">
<a href="../../../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
<!-- Custom search --><form method="get" id="search" action="//duckduckgo.com/" class="navbar-form pull-right">
<input type="hidden" name="sites" value="https://www.lvh.io/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="display: none;">
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right">
<li class="nav-item">
    <a href="index.md" id="sourcelink" class="nav-link">Source</a>
    </li>


                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Using protractor with AngularJS and Yeoman</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    lvh
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2013-11-15T11:29:00-08:00" itemprop="datePublished" title="2013-11-15 11:29">2013-11-15 11:29</time></a>
            </p>
            
        <p class="sourceline"><a href="index.md" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>In writing the website for Crypto 101, my upcoming book, I've been
toying around with AngularJS. The basic setup was done using Yeoman.</p>
<p>First of all, the Yeoman Angular generator gives you a
<code>karma-e2e.conf.js</code>, but doesn't really configure grunt to do any
end-to-end testing. Turns out that the new hotness for Angular
scenario testing is based on Protractor. Karma isn't deprecated, it's
just for unit tests. Protractor is based on Selenium, which is
probably an upgrade :-)</p>
<p>Anyway, here's what I had to do to get started.</p>
<ol>
<li>In the root of your app, install protractor and the Selenium
   standalone server.</li>
</ol>
<pre class="code literal-block"><span></span><span class="n">npm</span> <span class="n">install</span> <span class="c1">--save-dev protractor</span>
<span class="p">.</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">protractor</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">install_selenium_standalone</span>
</pre>


<ol>
<li>
<p>Optionally, add <code>selenium</code> to your <code>.gitignore</code>, since it contains
   a ~30MB binary that doesn't belong in your git repo.</p>
</li>
<li>
<p>Add a <code>protractor.conf.js</code> file. Here's mine. Remember that there's
   some stuff in there for you to uncomment, so don't just copy paste.
   On my machine, the default driver was Internet Explorer for
   Windows, which is strange given that I'm running on OS X. Oh well.
   This uses Chrome instead.</p>
</li>
</ol>
<pre class="code literal-block"><span></span><span class="nx">exports</span><span class="p">.</span><span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">seleniumAddress</span><span class="o">:</span> <span class="s1">'http://localhost:4444/wd/hub'</span><span class="p">,</span>
  <span class="nx">specs</span><span class="o">:</span> <span class="p">[</span>
    <span class="c1">// To run plain JS files, uncomment the following line:</span>
    <span class="c1">// './test/integration/*.js',</span>
    <span class="c1">// To run Coffeescript files, uncomment the following line:</span>
    <span class="c1">// '.tmp/integration/*.js'</span>
  <span class="p">],</span>

  <span class="c1">// Set capabilities.</span>
  <span class="nx">capabilities</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">'browserName'</span><span class="o">:</span> <span class="s1">'chrome'</span>
  <span class="p">},</span>

  <span class="nx">jasmineNodeOpts</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">showColors</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">defaultTimeoutInterval</span><span class="o">:</span> <span class="mi">30000</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre>


<ol>
<li>If you're using Coffeescript, change your Gruntfile to build your
   integration tests:</li>
</ol>
<pre class="code literal-block"><span></span>  <span class="n">grunt</span><span class="p">.</span><span class="n">initConfig</span><span class="p">(</span><span class="err">{</span>
    <span class="o">//</span> <span class="p">...</span>
    <span class="n">coffee</span><span class="p">:</span> <span class="err">{</span>
      <span class="o">//</span> <span class="p">...</span>
      <span class="n">test</span><span class="p">:</span> <span class="err">{</span>
        <span class="n">files</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">//</span> <span class="p">...</span>
        <span class="err">{</span>
          <span class="n">expand</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
          <span class="n">cwd</span><span class="p">:</span> <span class="s1">'test/integration'</span><span class="p">,</span>
          <span class="n">src</span><span class="p">:</span> <span class="s1">'{,*/}*.coffee'</span><span class="p">,</span>
          <span class="n">dest</span><span class="p">:</span> <span class="s1">'.tmp/integration'</span><span class="p">,</span>
          <span class="n">ext</span><span class="p">:</span> <span class="s1">'.js'</span>
        <span class="err">}</span><span class="p">]</span>
      <span class="err">}</span>
    <span class="err">}</span><span class="p">,</span>
  <span class="o">//</span> <span class="p">...</span>
<span class="err">}</span><span class="p">)</span>
</pre>


<ol>
<li>
<p>Write some tests in <code>test/integration</code>.</p>
</li>
<li>
<p>You can now manually run your tests. First run Selenium:</p>
</li>
</ol>
<pre class="code literal-block"><span></span><span class="p">.</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">protractor</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">install_selenium_standalone</span>
</pre>


<p>Then run your tests:</p>
<pre class="code literal-block"><span></span><span class="p">.</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">protractor</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">protractor</span> <span class="n">protractor</span><span class="p">.</span><span class="n">conf</span><span class="p">.</span><span class="n">js</span>
</pre>


<p>Once I figure out the proper way to do this in Grunt, I'll let you
know.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../../10/thoughts-on-rdrand-in-linux/" rel="prev" title="Thoughts on RDRAND in Linux">Previous post</a>
            </li>
            <li class="next">
                <a href="../../12/external-drive-lossage-on-mavericks/" rel="next" title="External drive lossage on Mavericks">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents © 2019         <a href="mailto:_@lvh.io">lvh</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


        <script src="../../../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36779422-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
